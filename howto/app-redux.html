
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>React Redux Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-add-js-css/63c35acfef9dd396459654e267076c8e-forrestjs.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-insert-logo/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-code/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="app-reducers.html" />
    
    
    <link rel="prev" href="app.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    ForrestJS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" >
            
                <a target="_blank" href="https://github.com/forrestjs/forrestjs">
            
                    
                    Give us a star on GitHub!
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" >
            
                <a target="_blank" href="https://www.npmjs.com/package/forrest">
            
                    
                    Install from NPM
            
                </a>
            

            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="../tutorials.html">
            
                <a href="../tutorials.html">
            
                    
                    Read the Tutorials
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="../packages.html">
            
                <a href="../packages.html">
            
                    
                    Navigate the Packages
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Step By Step Tutorial</li>
        
        
    
        <li class="chapter " data-level="3.1" >
            
                <a target="_blank" href="https://marcopeg.com/2019/modular-node-apps-with-hooks">
            
                    
                    Introduction to ForrestJS
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Articles</li>
        
        
    
        <li class="chapter " data-level="4.1" >
            
                <a target="_blank" href="https://marcopeg.com/2020/javascript-the-good-parts">
            
                    
                    JS in 2020
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2" >
            
                <a target="_blank" href="https://marcopeg.com/2020/forrestjs-fastify">
            
                    
                    Online commented demoes
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Other Stuff</li>
        
        
    
        <li class="chapter " data-level="5.1" >
            
                <a target="_blank" href="https://github.com/forrestjs/forrestjs/blob/master/DEVELOPMENT.md">
            
                    
                    Hot to Develop for ForrestJS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.2" >
            
                <a target="_blank" href="https://github.com/forrestjs/forrestjs/blob/master/CONTRIBUTE.md">
            
                    
                    Hot to Contribute to ForrestJS
            
                </a>
            

            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="6.1" >
            
                <span>
            
                    
                    Outdated Docs
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.1.1" >
            
                <span>
            
                    
                    Outdated Tutorials
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.1.1.1" >
            
                <a target="_blank" href="https://marcopeg.com/2019/create-react-app-universal-pwa">
            
                    
                    Create React App > Universal
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.1.2" data-path="cra-redux.html">
            
                <a href="cra-redux.html">
            
                    
                    Create React App > Redux
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.1.3" data-path="cra-features.html">
            
                <a href="cra-features.html">
            
                    
                    Create React App > Features
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.1.4" >
            
                <a target="_blank" href="https://marcopeg.com/2019/modular-node-apps-with-hooks">
            
                    
                    Hooks, truly modular NodeJS Apps
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.1.5" >
            
                <a target="_blank" href="https://marcopeg.com/2019/graphql-made-easy">
            
                    
                    GraphQL made easy with Hooks
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6.1.2" >
            
                <span>
            
                    
                    Outdated Articles
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.1.2.1" data-path="../articles/reducers.html">
            
                <a href="../articles/reducers.html">
            
                    
                    Reducers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.2.2" data-path="../articles/services.html">
            
                <a href="../articles/services.html">
            
                    
                    Services
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.2.3" data-path="../articles/styled-components.html">
            
                <a href="../articles/styled-components.html">
            
                    
                    SSR with Styled Components
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6.1.3" >
            
                <span>
            
                    
                    Outdated Docs (need review)
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.1.3.1" data-path="../api/">
            
                <a href="../api/">
            
                    
                    API
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.1.3.1.1" data-path="../api/create-ssr-state.html">
            
                <a href="../api/create-ssr-state.html">
            
                    
                    createSSRState
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.3.1.2" data-path="../api/create-ssr-context.html">
            
                <a href="../api/create-ssr-context.html">
            
                    
                    createSSRContext
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.3.1.3" data-path="../api/create-ssr-render.html">
            
                <a href="../api/create-ssr-render.html">
            
                    
                    createSSRRender
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.3.1.4" data-path="../api/create-ssr-router.html">
            
                <a href="../api/create-ssr-router.html">
            
                    
                    createSSRRouter
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.3.1.5" data-path="../api/memcached.html">
            
                <a href="../api/memcached.html">
            
                    
                    Memcached
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6.1.3.2" >
            
                <span>
            
                    
                    Step By Step Tutorial
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.1.3.2.1" data-path="setup.md">
            
                <span>
            
                    
                    Prerequisites & Setup
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.3.2.2" data-path="app.html">
            
                <a href="app.html">
            
                    
                    Universal App
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="6.1.3.2.2.1" data-path="app-redux.html">
            
                <a href="app-redux.html">
            
                    
                    React Redux
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.3.2.2.2" data-path="app-reducers.html">
            
                <a href="app-reducers.html">
            
                    
                    Reducers & Initial State
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.3.2.2.3" data-path="features.html">
            
                <a href="features.html">
            
                    
                    Think in Features
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.1.3.2.2.3.1" data-path="features-users.html">
            
                <a href="features-users.html">
            
                    
                    users feature
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.3.2.2.3.2" data-path="features-splash.html">
            
                <a href="features-splash.html">
            
                    
                    splash-screen feature
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6.1.3.2.3" data-path="ssr.html">
            
                <a href="ssr.html">
            
                    
                    Server Side Rendering
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.1.3.2.3.1" data-path="ssr-folders.html">
            
                <a href="ssr-folders.html">
            
                    
                    Folders structure
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.3.2.3.2" data-path="ssr-babel.html">
            
                <a href="ssr-babel.html">
            
                    
                    Babel setup (transpiler)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.3.2.3.3" data-path="ssr-npm-dependencies.html">
            
                <a href="ssr-npm-dependencies.html">
            
                    
                    NPM dependencies
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.3.2.3.4" data-path="ssr-npm-scripts.html">
            
                <a href="ssr-npm-scripts.html">
            
                    
                    NPM scripts
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.3.2.3.5" data-path="ssr-frontend.html">
            
                <a href="ssr-frontend.html">
            
                    
                    the frontend script
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.3.2.3.6" data-path="ssr-backend.html">
            
                <a href="ssr-backend.html">
            
                    
                    the backend script
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.3.2.3.7" data-path="ssr-kickoff.html">
            
                <a href="ssr-kickoff.html">
            
                    
                    the kickoff scripts
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.3.2.3.8" data-path="ssr-code-splitting.html">
            
                <a href="ssr-code-splitting.html">
            
                    
                    code splitting
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6.1.3.2.4" data-path="docker.html">
            
                <a href="docker.html">
            
                    
                    Deploy with Docker
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.3.2.5" data-path="router.html">
            
                <a href="router.html">
            
                    
                    Add React Router
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.1.3.2.5.1" data-path="router-setup.html">
            
                <a href="router-setup.html">
            
                    
                    basic setup
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.3.2.5.2" data-path="router-routes.html">
            
                <a href="router-routes.html">
            
                    
                    add some routes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.3.2.5.3" data-path="router-load.html">
            
                <a href="router-load.html">
            
                    
                    load stuff
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6.1.3.2.6" data-path="seo.html">
            
                <a href="seo.html">
            
                    
                    SEO Optimization
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.3.2.7" data-path="eslint.html">
            
                <a href="eslint.html">
            
                    
                    Customize ESLint
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.3.2.8" data-path="graphql.html">
            
                <a href="graphql.html">
            
                    
                    Add GraphQL
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.1.3.2.8.1" data-path="graphql-setup.html">
            
                <a href="graphql-setup.html">
            
                    
                    setup
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.3.2.8.2" data-path="graphql-backend.html">
            
                <a href="graphql-backend.html">
            
                    
                    backend
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.1.3.2.8.3" data-path="graphql-frontend.html">
            
                <a href="graphql-frontend.html">
            
                    
                    frontend
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6.1.3.2.9" data-path="multilanguage.html">
            
                <a href="multilanguage.html">
            
                    
                    Add Multilanguage Support
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >React Redux</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="add-redux">Add Redux</h1>
<p><a href="https://redux.js.org/" target="_blank">Redux</a> is an important component of any server side rendered
application as it allow us to progressively compose a state while resolving asynchronous
calls such apis, code splitting, ect.</p>
<p><code>@marcopeg/react-ssr</code> ships some helper functions that facilitate the setup.</p>
<h3 id="step-n1">Step n.1</h3>
<p>Create an <code>src/state.js</code> file in your app:</p>
<pre><code>import createSSRState from &apos;@marcopeg/react-ssr/lib/create-ssr-state&apos;
export const createState = createSSRState()
</code></pre><p><strong>NOTE:</strong> further on we are going to add some juice to this file by setting up
our app&apos;s core reducers and features.</p>
<h3 id="step-n2">Step n.2</h3>
<p>Create an <code>src/Root.js</code> file in your app:</p>
<pre><code>import React from &apos;react&apos;
import { Provider } from &apos;react-redux&apos;
import App from &apos;./App&apos;

const Root = ({ store, ...props }) =&gt; (
    &lt;Provider store={store}&gt;
        &lt;App {...props} /&gt;
    &lt;/Provider&gt;
)

export default Root
</code></pre><p><strong>NOTE:</strong> this components is used to wire up your application, right now it implements
the Redux&apos; provider, but later on we will enrich it with the 
<a href="https://reacttraining.com/react-router/" target="_blank">react-router</a> provider as well.</p>
<p>This leaves the <code>src/App.js</code> to the real app&apos;s business logic, clean from infrastructural
nightmares :-)</p>
<h3 id="step-n3">Step n.3</h3>
<p>Implement the redux state in your app&apos;s entry point <code>src/index.js</code>:</p>
<pre><code>import React from &apos;react&apos;
import ReactDOM from &apos;react-dom&apos;
import &apos;./index.css&apos;
import * as serviceWorker from &apos;./serviceWorker&apos;
import { createState } from &apos;./state&apos;

const boot = props =&gt; {
    const renderApp = () =&gt; {
        const Root = require(&apos;./Root&apos;).default
        ReactDOM.render(&lt;Root {...props} /&gt;, document.querySelector(&apos;#root&apos;))
    }

    if (module.hot) {
        module.hot.accept(renderApp)
    }

    renderApp()
}

createState()
    .then(boot)

    // If you want your app to work offline and load faster, you can change
    // unregister() to register() below. Note this comes with some pitfalls.
    // Learn more about service workers: http://bit.ly/CRA-PWA
    // serviceWorker.unregister();
    .then(() =&gt; serviceWorker.unregister())

    .catch(err =&gt; console.log(err))
</code></pre><h3 id="hot-module-reload">Hot Module Reload</h3>
<p>The proposed setup enables <strong>Hot Module Reload</strong> in your CRA.</p>
<p>It is worth to mention that this is a very basic implementation and will not preserve
the state of single components upon reload.</p>
<p>On the other hand, it preserves the redux state, so it will be a very nice experience
to work out your application anyway. You might still need to do full reloads here and
there when you change reducers or functions that are attached to DOM events.</p>
<p>Again, this is a very simple implementation that works nicely for most of the
development challenges that I&apos;ve been facing so far.</p>
<p>If you want more you should consider to <a href="../articles/styleguide.md">work with a styleguide</a>.</p>
<h3 id="check-it-out">Check it out!</h3>
<p>Just <code>npm start</code> the app and check out that the <a href="https://chrome.google.com/webstore/detail/redux-devtools/lmhkpmbekcpmknklioeibfkpmmfibljd?hl=en" target="_blank">redux-devtools</a> are working properly. Don&apos;t worry, they are going to be removed in production!</p>
<p><img src="../images/create-react-app-ssr__redux-tools.png" alt="redux-tools"></p>
<h3 id="what-do-i-get-with-redux">What do I get with Redux?</h3>
<p>Here is the list of libraries that are going to be wired up for your convenience:</p>
<ul>
<li><a href="https://redux.js.org/" target="_blank">redux (state management)</a></li>
<li><a href="https://www.npmjs.com/package/redux-thunk" target="_blank">redux thunk</a></li>
<li><a href="https://www.npmjs.com/package/redux-events-middleware" target="_blank">redux events</a></li>
<li><a href="https://www.npmjs.com/package/react-redux-feature" target="_blank">redux features</a></li>
</ul>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="app.html" class="navigation navigation-prev " aria-label="Previous page: Universal App">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="app-reducers.html" class="navigation navigation-next " aria-label="Next page: Reducers & Initial State">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"React Redux","level":"6.1.3.2.2.1","depth":5,"next":{"title":"Reducers & Initial State","level":"6.1.3.2.2.2","depth":5,"path":"howto/app-reducers.md","ref":"./howto/app-reducers.md","articles":[]},"previous":{"title":"Universal App","level":"6.1.3.2.2","depth":4,"path":"howto/app.md","ref":"./howto/app.md","articles":[{"title":"React Redux","level":"6.1.3.2.2.1","depth":5,"path":"howto/app-redux.md","ref":"./howto/app-redux.md","articles":[]},{"title":"Reducers & Initial State","level":"6.1.3.2.2.2","depth":5,"path":"howto/app-reducers.md","ref":"./howto/app-reducers.md","articles":[]},{"title":"Think in Features","level":"6.1.3.2.2.3","depth":5,"path":"howto/features.md","ref":"./howto/features.md","articles":[{"title":"users feature","level":"6.1.3.2.2.3.1","depth":6,"path":"howto/features-users.md","ref":"./howto/features-users.md","articles":[]},{"title":"splash-screen feature","level":"6.1.3.2.2.3.2","depth":6,"path":"howto/features-splash.md","ref":"./howto/features-splash.md","articles":[]}]}]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["add-js-css","custom-favicon","insert-logo","code","collapsible-menu"],"pluginsConfig":{"collapsible-menu":{},"search":{},"add-js-css":{"css":["./forrestjs.css"]},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"code":{"copyButtons":true},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"favicon":"/images/forrestjs.ico","custom-favicon":{},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"insert-logo":{"url":"/images/forrestjs.png","style":"background: none;"}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"howto/app-redux.md","mtime":"2020-08-02T11:45:49.242Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2021-06-01T05:53:17.927Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-insert-logo/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-code/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-collapsible-menu/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

